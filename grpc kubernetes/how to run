How to Run the gRPC Pipeline on Kubernetes
Step 1: Environment Setup & Kubernetes Installation

Install Docker Desktop

Ensure the latest version is installed on Windows or macOS.

Docker Desktop includes a local Kubernetes cluster.

Enable Kubernetes

Open Docker Desktop ‚Üí Settings ‚Üí Kubernetes tab.

Check Enable Kubernetes ‚Üí Click Apply & Restart.

Wait a few minutes while Kubernetes is set up.

Verify Kubernetes

kubectl cluster-info


You should see:

Kubernetes control plane is running at ...

Step 2: Navigate to Project Folder
cd "grpc kubernetes"

Step 3: Build Docker Images
docker build --no-cache -t grpc-pipeline:k8s .
docker build --no-cache -t grpc-pipeline:k8s-final .


Docker Desktop Kubernetes automatically uses local images ‚Äî no need to load them manually.

Step 4: Deploy to Kubernetes
kubectl apply -f pipeline.yaml

Monitor Pods
kubectl get pods -w


Wait until all pods show STATUS as Running.

You should see 5 pods:

datagen-deployment
preprocess-deployment
feature-deployment
analysis-deployment
master-deployment


Press Ctrl+C to stop watching.

Step 5: Verify Services and NodePort
kubectl get svc


You should see all 5 services:

NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)
datagen      ClusterIP   10.xxx.xxx.xxx  <none>        50051/TCP
preprocess   ClusterIP   10.xxx.xxx.xxx  <none>        50052/TCP
feature      ClusterIP   10.xxx.xxx.xxx  <none>        50053/TCP
analysis     ClusterIP   10.xxx.xxx.xxx  <none>        50054/TCP
master       NodePort    10.xxx.xxx.xxx  <none>        50055:3XXXX/TCP


External NodePort: the 5-digit number after the colon in PORT(S) (e.g., 3XXXX).

Step 6: Run the Client

The updated client.py automatically connects to the Master service using the NodePort.

python client.py

Expected Output:
============================================================
üöÄ STARTING Kubernetes gRPC CLIENT üöÄ
============================================================
Connecting to MASTER service at: 127.0.0.1:3XXXX
[HH:MM:SS] CLIENT: Initiating pipeline with data_size = 300...
[HH:MM:SS] CLIENT: Received final response from the master server.
-------------------------
‚úÖ PIPELINE COMPLETE
-------------------------
üìä Final Summary:
     - Cluster Result:   Cluster A
     - Correlation:      1.0000
     - Average Distance: 129.0260

‚è±Ô∏è Total Execution Time: 0.1805 seconds
============================================================


Pipeline automatically calls all worker services: datagen ‚Üí preprocess ‚Üí feature ‚Üí analysis.

No manual edits to the client are required.

Step 7: Cleanup
kubectl delete -f pipeline.yaml


Deletes all pods, deployments, and services created.